<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 3</title>
    <style>
        body {
            font-family: Palatino, serif;
            width: 95%;
            margin: auto;
        }

        .button {
            margin: 10px;
            padding: 10px;
            font-family: Palatino, serif;
            transition-duration: 0.4s;
        }

        .button:hover {
            background-color: black;
            color: white;
        }

        h1, h2 {
            text-align: center;
            margin: 30px 0;
            opacity: 0;
            transform: translateY(-50px);
            animation: fadeSlideIn 0.7s ease-out forwards;
        }

        h2 {
            font-size: 1.5em;
        }

        .fade-in {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .box {
            border: 1px solid black;
            padding: 20px;
            line-height: 23px;
            margin: 10px auto;
            text-align: center;
            width: 80%;
            box-sizing: border-box;
        }

        .feature-row {
            display: flex;
            flex-wrap: nowrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
            width: 100%;
            max-width: 100vw; 
        }

        .feature-row .image-caption-corners img {
            height: 100%;    
            width: auto;    
            max-height: 60vh;
            max-width: 100%;
            display: block;
        }

        .image-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }

        .image-row img {
            max-width: 45%;
            margin: 10px;
            height: auto;
        }

        .caption {
            text-align: center;
            font-style: italic;
            margin-bottom: 20px;
            width: 100%;
        }

        .image-caption-row {
            display: flex;
            flex-wrap: nowrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .image-caption {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 10px;
        }

        .image-caption img {
            max-width: 100%;
            height: auto;
        }

        .image-caption-corners img {
            width: 30vw;
            height: auto;
        }

        .image-caption .caption {
            margin-top: 5px;
            font-style: italic;
            text-align: center;
        }

        .correspondence-row {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
        }

        .correspondence-image {
            flex: 0 0 75%;
            max-width: 75%;
            padding: 10px;
        }

        .correspondence-image img {
            width: 100%;
            height: auto;
        }

        .correspondence-text {
            flex: 0 0 20%;
            max-width: 20%;
            padding: 10px;
            display: flex;
            align-items: center;
            text-align: left;
        }

        @keyframes fadeSlideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <a href="../index.html">
        <button class="button">Return to home page.</button>
    </a>

    <h1>Project 3: [Auto]Stitching Photo Mosaics ü™° üñºÔ∏è üéûÔ∏è </h1>

    <h2 class="fade-in">Part 1: Shoot the Pictures</h2>
    <div class="box fade-in">
        In this part, I took photographs in different locations with a projective transform between them. In other words, I did my best to keep the center of projection stable and rotate my camera.
    </div>
    <div class="image-row fade-in">
        <img src="data/davies_img1.jpeg" alt="Davies Image 1">
        <img src="data/davies_img2.jpeg" alt="Davies Image 2">
    </div>
    <div class="caption">Starting far away: Davies Hall in San Francisco at night after a symphony concert!</div>
    <br>
    <div class="image-row fade-in">
        <img src="data/road_img1.jpg" alt="Road Image 1">
        <img src="data/road_img2.jpg" alt="Road Image 2">
    </div>
    <div class="caption">Almost home! Here are some scenes of the 7-11 on Telegraph Ave late at night</div>
    <br>
    <div class="image-row fade-in">
        <img src="data/room_img1.jpg" alt="Room Image 1">
        <img src="data/room_img2.jpg" alt="Room Image 2">
    </div>
    <div class="caption">Now, we‚Äôre home: my corner of sentimental pictures, memories, and trinkets</div>
    <br><br>
    <h2 class="fade-in">Part 2: Recover Homographies</h2>
    <div class="box fade-in">
        In Part 2, I implemented the <b>computeH(im1_pts, im2_pts)</b> function. im1_pts and im2_pts represent the n point correspondences and their (x, y) coordinate locations, and the goal of the function is to recover the 3x3 homography matrix H.
        <br><br>
        To do this, I set up a linear system of n equations to solve for the 8 unknown entries of the homography matrix (not including the guaranteed 1 in the bottom-right corner). In my mosaic calculations later in the project, I computed 6 point correspondences to ensure an overdetermined system, making the calculation more stable.
    </div>

    <div class="correspondence-row fade-in">
        <div class="correspondence-image">
            <img src="correspondences/davies_selected_points.png" alt="Davies Selected Points">
        </div>
        <div class="correspondence-text">
            <p>To select these point correspondences (marked in red on the diagram), I tried to isolate corners and features such as the corner of a window, the corner of a poster, the base of a tree, and a divot of the statue.</p>
        </div>
    </div>

    <div class="image-caption-row fade-in">
        <div class="image-caption">
            <img src="correspondences/davies_coords.png" alt="Davies Coordinates">
            <div class="caption">selected coordinates</div>
        </div>
        <div class="image-caption">
            <img src="correspondences/davies_equation.png" alt="Davies Equation">
            <div class="caption">matrix equation</div>
        </div>
        <div class="image-caption">
            <img src="correspondences/davies_homography.png" alt="Davies Homography">
            <div class="caption">calculated homography</div>
        </div>
    </div>
    <hr>
    <div class="correspondence-row fade-in">
        <div class="correspondence-image">
            <img src="correspondences/road_selected_points.png" alt="Road Selected Points">
        </div>
        <div class="correspondence-text">
            <p>For the road and 7-11 image, I attempted to select features like the corner of the sign, a car tire, the top of the parking meter, etc.</p>
        </div>
    </div>

    <div class="image-caption-row fade-in">
        <div class="image-caption">
            <img src="correspondences/road_coords.png" alt="Road Coordinates">
            <div class="caption">selected coordinates</div>
        </div>
        <div class="image-caption">
            <img src="correspondences/road_equation.png" alt="Road Equation">
            <div class="caption">matrix equation</div>
        </div>
        <div class="image-caption">
            <img src="correspondences/road_homography.png" alt="Road Homography">
            <div class="caption">calculated homography</div>
        </div>
    </div>
    <hr>
    <div class="correspondence-row fade-in">
        <div class="correspondence-image">
            <img src="correspondences/room_selected_points.png" alt="Room Selected Points">
        </div>
        <div class="correspondence-text">
            <p>The point correspondences I chose for this image were corners of photos, corners between the pillow and shelf, and specific decorations.</p>
        </div>
    </div>

    <div class="image-caption-row fade-in">
        <div class="image-caption">
            <img src="correspondences/room_coords.png" alt="Road Coordinates">
            <div class="caption">selected coordinates</div>
        </div>
        <div class="image-caption">
            <img src="correspondences/room_equation.png" alt="Road Equation">
            <div class="caption">matrix equation</div>
        </div>
        <div class="image-caption">
            <img src="correspondences/room_homography.png" alt="Road Homography">
            <div class="caption">calculated homography</div>
        </div>
    </div>

    <hr>
    <h2 class="fade-in">Part 3: Warp the Images</h2>
    <div class="box fade-in" style="width: 100%; border: 1px solid black; padding: 20px; margin: 20px 0; text-align: center;">
        In Part 3, I implemented methods to warp images according to the homography matrix found in Part 2. Subsequently, I was able to perform image rectification on images that had a perspective transform performed on them.
        Two different interpolation methods are used: <b>nearest-neighbor interpolation</b> and <b>bilinear interpolation</b>.
        <br><br>
        As seen in the following examples, <b>bilinear interpolation results in smoother results</b>, while nearest neighbor interpolation 
        results in somewhat more ‚Äúpixelated‚Äù or choppy images. However, it is important to note that <b>nearest neighbor 
        interpolation is generally more efficient</b> than bilinear interpolation because bilinear interpolation requires around 
        4√ó the number of calculations as nearest neighbor; in bilinear interpolation, all 4 surrounding pixels need to be 
        considered instead of just rounding the pixel we are working with.
    </div>

    <div class="image-caption-row fade-in">
        <div class="image-caption">
            <img src="interpolation/new_york.jpeg" alt="Original NYC Image">
            <div class="caption">original image, from Levain Bakery in Noho, New York</div>
        </div>
        <div class="image-caption">
            <img src="interpolation/nyc_nn_warped.png" alt="NYC Nearest Neighbor">
            <div class="caption">warped image using nearest neighbor interpolation</div>
        </div>
        <div class="image-caption">
            <img src="interpolation/nyc_bilinear_warped.png" alt="NYC Bilinear">
            <div class="caption">warped image using bilinear interpolation -- much smoother than NN interpolation</div>
        </div>
    </div>

    <div class="image-caption-row fade-in">
        <div class="image-caption">
            <img src="interpolation/photobooth_long.jpeg" alt="Original Photobooth Image">
            <div class="caption">original image, photobooth in Cupertino with my friends :)</div>
        </div>
        <div class="image-caption">
            <img src="interpolation/photobooth_nn_warped.png" alt="Photobooth Nearest Neighbor">
            <div class="caption">warped image using nearest neighbor interpolation</div>
        </div>
        <div class="image-caption">
            <img src="interpolation/photobooth_bilinear_warped.png" alt="Photobooth Bilinear">
            <div class="caption">warped image using bilinear interpolation -- smoother!</div>
        </div>
    </div>

        <h2 class="fade-in">Part 4: Blend the Images into a Mosaic</h2>
    <div class="box fade-in">
        In this part, I combine the previous parts to create a mosaic of the images stitched together. I use the warping mechanism from before to warp the first image and stitch it with the original second image (left unwarped).
    </div>

    <div class="image-caption-row fade-in">
        <div class="image-caption">
            <img src="data/davies_img1.jpeg" alt="Davies Image 1">
            <div class="caption">original image 1 of Davies</div>
        </div>
        <div class="image-caption">
            <img src="data/davies_img2.jpeg" alt="Davies Image 2">
            <div class="caption">original image 2 of Davies</div>
        </div>
        <div class="image-caption">
            <img src="mosaics/mosaic_davies_naive.png" alt="Davies Mosaic Naive">
            <div class="caption">combined Davies mosaic!</div>
        </div>
    </div>

    <div class="image-caption-row fade-in">
        <div class="image-caption">
            <img src="data/road_img1.jpg" alt="Road Image 1">
            <div class="caption">original image 1 of the 7-11 and road</div>
        </div>
        <div class="image-caption">
            <img src="data/road_img2.jpg" alt="Road Image 2">
            <div class="caption">original image 2 of the 7-11 and road</div>
        </div>
        <div class="image-caption">
            <img src="mosaics/mosaic_road_naive.png" alt="Road Mosaic Naive">
            <div class="caption">combined 7-11 mosaic!</div>
        </div>
    </div>

    <div class="image-caption-row fade-in">
        <div class="image-caption">
            <img src="data/room_img1.jpg" alt="Room Image 1">
            <div class="caption">original image 1 of my room</div>
        </div>
        <div class="image-caption">
            <img src="data/room_img2.jpg" alt="Room Image 2">
            <div class="caption">original image 2 of my room</div>
        </div>
        <div class="image-caption">
            <img src="mosaics/mosaic_room_naive.png" alt="Room Mosaic Naive">
            <div class="caption">combined room mosaic!</div>
        </div>
    </div>

    <br><br>
    <h2 class="fade-in">Removing Edge Artifacts</h2>
    <div class="box fade-in">
        To reduce the sharpness of edges caused by just overwriting one picture with the other, I use weighted averaging to blend the images. To implement this, I introduced an alpha channel to the pixels to control the weight (essentially the transparency) in the average. The alpha channel is set deterministically; it is 1 at the center of the image and falls off linearly until hitting 0 at the edges.
    </div>

    <div class="image-caption-row fade-in">
        <div class="image-caption">
            <img src="mosaics/mosaic_davies_naive.png" alt="Davies Naive">
            <div class="caption">naive stitching, with overwriting</div>
        </div>
        <div class="image-caption">
            <img src="mosaics/mosaic_davies_blend.png" alt="Davies Blend">
            <div class="caption">stitching with weighted average blending</div>
        </div>
    </div>

    <div class="box fade-in" style="border: none; text-align: center; width: 80%;">
        While changes may look subtle, we can clearly see the abrupt seam in the middle of the windows at the top of the building. Blending smooths this seam and makes the image look more cohesive. However, this does cause some blurring of the middle of the image. This can be caused by the imprecise selection of point correspondences and imperfect center of projection, which we do not need to worry about with naive stitching.
    </div>
    <br>

    <div class="image-caption-row fade-in">
        <div class="image-caption">
            <img src="mosaics/mosaic_road_naive.png" alt="Road Naive">
            <div class="caption">naive stitching, with overwriting</div>
        </div>
        <div class="image-caption">
            <img src="mosaics/mosaic_road_blend.png" alt="Road Blend">
            <div class="caption">stitching with weighted average blending</div>
        </div>
    </div>

    <div class="box fade-in" style="border: none; text-align: center; width: 80%;">
        To see how blending improved the mosaic, focus on the seam in the sky to the right of the 7-11 sign. The blended version removes the abrupt edge and attempts to smooth out the changes in sky color.
    </div>
    <br>
    
    <div class="image-caption-row fade-in">
        <div class="image-caption">
            <img src="mosaics/mosaic_room_naive.png" alt="Room Naive">
            <div class="caption">naive stitching, with overwriting</div>
        </div>
        <div class="image-caption">
            <img src="mosaics/mosaic_room_blend.png" alt="Room Blend">
            <div class="caption">stitching with weighted average blending</div>
        </div>
    </div>

    <div class="box fade-in" style="border: none; text-align: center; width: 80%;">
        The seam that blending improved here can be seen in the middle of the poster with flowers at the top right of the image. After blending, this seam is barely visible.
    </div>

    
    <!--Part B--> 
    
    <hr>

    <h1 class="fade-in">Part B: Autostitching with Feature Matching</h1>

    <h2 class="fade-in">
        B.1: Harris Corner Detection
    </h2>

    <div class="box fade-in">
        For the first part of this half of the project, I used <b>Harris corner detection</b> to identify corners.
        This technique finds corners by isolating points where there are strong changes in both directions. 
        However, we notice in the first corner results that many of the points are strongly clustered together, 
        preventing the corner detection from being well-distributed and unrepetitive. 
        Thus, I then implement <b>Adaptive Non-Maximal Suppression (ANMS)</b>, which ensures that the detected corners 
        are spaced out well enough. This technique uses the corner strengths derived from the Harris response to find 
        a ‚Äúsuppression radius‚Äù for each point that represents the radius from the point at which a considerably stronger 
        corner can be found. Then, the highest suppression radii are taken to be the final corners, enabling both strong 
        and well-distributed corners to be detected.
    </div>

    <div class="image-caption-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/originals/bay_bridge.jpeg" alt="Bay Bridge Original">
            <div class="caption">original image of Bay Bridge</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/corners/bridge_corners.png" alt="Bridge Harris Corners">
            <div class="caption">Harris corner detection on bridge image ‚Äî not well-distributed</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/corners/bridge_anms.png" alt="Bridge ANMS">
            <div class="caption">ANMS applied ‚Äî much more well-distributed but still maintains strong corners</div>
        </div>
    </div>

    <br>

    <div class="image-caption-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/originals/kayak_img1.jpeg" alt="Kayak Original">
            <div class="caption">original image of kayaks</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/corners/kayak_corners.png" alt="Kayak Harris Corners">
            <div class="caption">Harris corner detection on kayak image</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/corners/kayak_anms.png" alt="Kayak ANMS">
            <div class="caption">ANMS applied</div>
        </div>
    </div>

    <br>

    <div class="image-caption-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/originals/gudetama.jpeg" alt="Gudetama Original">
            <div class="caption">original image of Gudetama (unbroken!)</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/corners/gudetama_corners.png" alt="Gudetama Harris Corners">
            <div class="caption">Harris corner detection on Gudetama image</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/corners/gudetama_anms.png" alt="Gudetama ANMS">
            <div class="caption">ANMS applied</div>
        </div>
    </div>

    <br>

    <div class="image-caption-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/originals/gudetama_broken.jpeg" alt="Gudetama Broken Original">
            <div class="caption">original image of Gudetama (broken‚Ä¶)</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/corners/gudetama_broken_corners.png" alt="Gudetama Broken Corners">
            <div class="caption">Harris corner detection on Gudetama image</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/corners/gudetama_broken_anms.png" alt="Gudetama Broken ANMS">
            <div class="caption">ANMS applied</div>
        </div>
    </div>

    <!--B.2-->
    <h2 class="fade-in"> B.2: Feature Descriptor Extraction </h2>

    <div class="box fade-in">
        To extract features we later match images on, we use the corners we detected in the previous part and construct a descriptor for each corner. 
        We do this by sampling a 40√ó40 window around the corner and then resizing it down to an 8√ó8 descriptor. 
        This allows us to connect matching features between images without being so granular that corresponding points do not get detected as matching. 
        We also normalize the patches to account for image-independent parameters such as lighting.
    </div>
    <br>
    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/originals/bay_bridge.jpeg" alt="Bay Bridge Original">
            <br>
            <div class="caption">original image of Bay Bridge</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/features/bridge_features.png" alt="Bridge Features">
            <div class="caption">features selected for the Bay Bridge, such as details and sharp corners on the bridge</div>
        </div>
    </div>

    <br><hr><br>

    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/originals/kids.jpeg" alt="Kids Original">
            <br>
            <div class="caption">original image of my sister and me being cool</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/features/kids_features.png" alt="Kids Features">
            <div class="caption">features selected for human features such as an arm, hairline, etc.</div>
        </div>
    </div>

    <br><hr><br>

    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/originals/kayak_img1.jpeg" alt="Kayak Original">
            <br>
            <div class="caption">original image of kayaks</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/features/kayak_features.png" alt="Kayak Features">
            <div class="caption">features selected for the kayak, such as strings on the kayak and tall poles</div>
        </div>
    </div>
    <h2 class="fade-in">B.3: Feature Matching</h2>

    <div class="box fade-in">
        Next, we want to automatically find point correspondences between images by finding feature matches. To do this, we compare pairs of the features we extracted in the last part, finding the squared distances between the pair. We then sort these distances, finding the best matches. However, we threshold good vs. bad matches using <strong>Lowe‚Äôs ratio</strong>, which finds the ratio of the error for the best match (1-nearest neighbor) to the error for the second best match (2-NN).
        <br><br>
        In the following examples, we see quite good results for feature matching, where each differently colored line is matching 1 corresponding pair of features. However, we see that there are a few outliers, which we will rectify in the next part.
    </div>

    <br><br>

    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/matching/room_matching.png" alt="Kayak Matching">
            <div class="caption">feature matchings between these two camera angles of the favorite corner of my room</div>
        </div>
    </div>

    <br><br>

    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/matching/road_matching.png" alt="Road Matching">
            <div class="caption">feature matchings between two angles of the 7-11 and road</div>
        </div>
    </div>

    <br><br>

    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/matching/kayak_matching.png" alt="Room Matching">
            <div class="caption">feature matchings between two angles of the kayaks</div>
        </div>
    </div>


    <h2 class="fade-in">B.4: RANSAC and Mosaics</h2>

    <div class="box fade-in">
        Notice that we have a few incorrect matches (outliers) in our previous results. We can vastly improve this by using RANSAC. This technique performs several iterations of the following loop. First, 4 feature pairs are selected at random, from which the homography transforming the coordinates is calculated. Then, we keep a running maximum for the number of inliers (the mapped points that are close enough to the actual matching points). Keeping the largest set of inliers filters out incorrect matches, which would have caused the number of inliers to be much lower than if they were correct. At the end, the least-squares estimate of the homography matrix H is re-computed.

        In the following examples, it is very evident that RANSAC is effective at eliminating outliers. An easy way to see this is that the lines connecting corresponding points are all roughly parallel, indicating a consistent homography transformation amongst these points (largest set of inliers).
    </div>

    <br><br>

    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/ransac/room_ransac.png" alt="Room RANSAC">
            <div class="caption">feature matchings for my room after RANSAC ‚Äî so much better!</div>
        </div>
    </div>

    <br><br>

    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/ransac/road_ransac.png" alt="Road RANSAC">
            <div class="caption">feature matchings for the road after RANSAC</div>
        </div>
    </div>

    <br><br>

    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="part2/ransac/kayak_ransac.png" alt="Kayak RANSAC">
            <div class="caption">feature matchings for the kayaks after RANSAC</div>
        </div>
    </div>

    <br><br>

    <div class="box fade-in">
        Now that we have accurate point correspondences, we can try to generate mosaics again. By using these automatic correspondences, the mosaics are much more seamless, without the blur and misalignments that were evident in the manual correspondences.
    </div>

    <br><br>

    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="mosaics/mosaic_room_blend.png" alt="Room Mosaic Manual">
            <br>
            <div class="caption">mosaic of the room with manual correspondences; blurring can be seen in the photos and decorations</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/mosaics/room_mosaic.png" alt="Room Mosaic Automatic">
            <br>
            <div class="caption">mosaic of the room with automatic correspondences; much more seamless!</div>
        </div>
    </div>

    <br><br>

    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="mosaics/mosaic_road_blend.png" alt="Road Mosaic Manual">
            <br>
            <div class="caption">mosaic of the road with manual correspondences; blurring can be seen in the trees and sidewalk</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/mosaics/road_mosaic.png" alt="Road Mosaic Automatic">
            <br>
            <div class="caption">mosaic of the road with automatic correspondences; again, more seamless but a little less obvious in this picture because of the dark sky</div>
        </div>
    </div>

    <br><br>

    <div class="feature-row fade-in">
        <div class="image-caption-corners">
            <img src="mosaics/mosaic_kayak_blend.png" alt="Kayak Mosaic Manual">
            <br>
            <div class="caption">mosaic of the kayaks with manual correspondences; blurring can be seen in the trees and sidewalk</div>
        </div>
        <div class="image-caption-corners">
            <img src="part2/mosaics/kayak_mosaic.png" alt="Kayak Mosaic Automatic">
            <br>
            <div class="caption">mosaic of the kayaks with automatic correspondences; very seamless stitching!</div>
        </div>
    </div>


    <script>
        const faders = document.querySelectorAll('.fade-in');
        const options = {
            threshold: 0.2
        };
        const observer = new IntersectionObserver(function(entries, observer) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, options);

        faders.forEach(fader => {
            observer.observe(fader);
        });
    </script>
</body>
</html>
